#!/bin/bash

echo Using MESA+GPGPUSIM!
#alias g++="/usr/bin/g++-5"
#alias gcc="/usr/bin/gcc-5"

#PLEASE CONFIG
export CUDAHOME=~/nvcuda/3.2/cuda
export M5_PATH=/extra/hd1/extra/ayub/google_code/disk_image
export NVIDIA_CUDA_SDK_LOCATION=/extra/hd1/extra/ayub/NVIDIA_GPU_Computing_SDK/3.2/C
export LD_LIBRARY_PATH=/extrahd1/extra/ayub/google_code/emulator-2.4/external/qemu/objs/lib64
export APITRACE_LIB_PATH=/extra/hd1/extra/ayub/google_code/apitrace/build/retrace/libglretrace.so

export LD_LIBRARY_PATH=$PWD/mesa/lib
export LD_LIBRARY_PATH=$PWD/mesa/lib/gallium
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$CUDAHOME/lib
export GPGPUSIM_MESA_ROOT=$PWD

#export MESA_GPGPUSIM_DEBUG="$1"
export PATH=$PATH:$CUDAHOME/bin
export PATH=$PATH:$PWD/gem5/util/term
export CUDA_INSTALL_PATH=$CUDAHOME

#emulator & mesa flags
export ANDROID_GL_SOFTWARE_RENDERER=1
if [ $ANDROID_GL_SOFTWARE_RENDERER -eq 1 ]
then
  echo "Running in OGLES mode"
  export LIBGL_DRIVERS_PATH=$PWD/mesa/lib/gallium
  export ANDROID_EGL_LIB=$PWD/mesa/lib/libEGL.so
  #export ANDROID_GLESv1_LIB=""
  export ANDROID_GLESv2_LIB=$PWD/mesa/lib/libGLESv2.so
else
  echo "Running in OGL mode"
  export LIBGL_DRIVERS_PATH=
  export ANDROID_EGL_LIB=
  export ANDROID_GLESv2_LIB=
fi

